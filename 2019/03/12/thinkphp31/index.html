<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">



<title>愉快的学习ThinkPHP3（3.1.2版本）之核心部分 | Love to share</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    


</head>
<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Bentham&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>

        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Bentham&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
        <div class="main">
            <div class="container">
    
    
        <div id="post-toc" class="post-toc">
            <span class="post-toc-title">catalogue</span>
            <div class="post-toc-content">
                <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#MVC和URL访问模式"><span class="toc-text">MVC和URL访问模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MVC是什么"><span class="toc-text">MVC是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ThinkPHP3的MVC对应的目录"><span class="toc-text">ThinkPHP3的MVC对应的目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4种URL访问模式"><span class="toc-text">4种URL访问模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改URL的分隔符"><span class="toc-text">修改URL的分隔符</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ThinkPHP3的输出"><span class="toc-text">ThinkPHP3的输出</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#模型的使用"><span class="toc-text">模型的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#开启debug模式和show-page-trace"><span class="toc-text">开启debug模式和show_page_trace</span></a></li></ol></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#对数据库进行增删查改"><span class="toc-text">对数据库进行增删查改</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#对数据进行读取"><span class="toc-text">对数据进行读取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#增加新的数据"><span class="toc-text">增加新的数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除数据"><span class="toc-text">删除数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#更新数据"><span class="toc-text">更新数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#花式查询"><span class="toc-text">花式查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#普通的查询方式"><span class="toc-text">普通的查询方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#表达式查询方式"><span class="toc-text">表达式查询方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#区间查询"><span class="toc-text">区间查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#统计查询"><span class="toc-text">统计查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#连贯操作"><span class="toc-text">连贯操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#视图"><span class="toc-text">视图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#模板的使用"><span class="toc-text">模板的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#模板输出"><span class="toc-text">模板输出</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#模板赋值"><span class="toc-text">模板赋值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#模板替换"><span class="toc-text">模板替换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#模板变量"><span class="toc-text">模板变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#模板标签"><span class="toc-text">模板标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#模板渲染"><span class="toc-text">模板渲染</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#控制器"><span class="toc-text">控制器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#URL"><span class="toc-text">URL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用AJAX"><span class="toc-text">使用AJAX</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#结束"><span class="toc-text">结束</span></a></li>
            </div>
        </div>
    
    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">愉快的学习ThinkPHP3（3.1.2版本）之核心部分</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">zhhhy</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">March 12, 2019&nbsp;&nbsp;20:02:16</a>
                        </span>
                    
                    
                </div>
            
        </header>

        <section class="post-content">
            <p>懒癌+拖延症晚期总算把ThinkPHP3.1.2大部分的内容看完了。结合完全开发手册把学习到的再总的过一遍。此篇将一些核心的使用总结一下，然后再找个项目演示练练手。</p>
<a id="more"></a>

<h2 id="MVC和URL访问模式"><a href="#MVC和URL访问模式" class="headerlink" title="MVC和URL访问模式"></a>MVC和URL访问模式</h2><h3 id="MVC是什么"><a href="#MVC是什么" class="headerlink" title="MVC是什么"></a>MVC是什么</h3><p>ThinkPHP3 也是基于MVC设计模式的。MVC只是一个抽象的概念，并没有特别明确的规定</p>
<ul>
<li><strong>M-Model</strong> 编写model类，进行对数据的操作</li>
<li><strong>V -View</strong>  编写html文件，页面呈现</li>
<li><strong>C -Controller</strong> 即控制器，编写类文件，Action控制器完成业务过程控制，而应用控制器负责调度控制。</li>
</ul>
<p>总而言之，ThinkPHP的MVC模式只是提供了一种敏捷开发的手段，而不是拘泥于MVC本身。</p>
<h3 id="ThinkPHP3的MVC对应的目录"><a href="#ThinkPHP3的MVC对应的目录" class="headerlink" title="ThinkPHP3的MVC对应的目录"></a>ThinkPHP3的MVC对应的目录</h3><ul>
<li>M 项目目录/应用目录/Lib/Model</li>
<li>V 项目目录/应用目录/Tpl</li>
<li>C 项目目录/应用目录/Lib/Action</li>
</ul>
<h3 id="4种URL访问模式"><a href="#4种URL访问模式" class="headerlink" title="4种URL访问模式"></a>4种URL访问模式</h3><ul>
<li>PATHINFO 模式<br>http://域名/项目名/入口文件/模块名/方法名/键1/值1/键2/值2</li>
<li>普通模式<br>http://域名/项目名/入口文件?m=模块名&amp;a=方法名&amp;键1=值1&amp;键2=值2</li>
<li>REWRITE模式<br>http://域名/项目名/模块名/方法名/键1/值1/键2/值2</li>
<li>兼容模式<br>http://域名/项目名/入口文件？s=模块名/方法名/键1/值1/键2/值2</li>
</ul>
<p>使用REWRIT模式可以使入口文件隐藏起来，这样URL会更加美观，这需要修改Apache的配置文件。后面会写。</p>
<h3 id="修改URL的分隔符"><a href="#修改URL的分隔符" class="headerlink" title="修改URL的分隔符"></a>修改URL的分隔符</h3><p>可以发现四种的URL访问方式有三种都使用了<strong>/</strong>作为分隔符。ThinkPHP提供了修改分隔符的方法，仅需修改配置文件config.php即可</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'URL_PATHINFO_DEPR'</span>=&gt;<span class="string">'-'</span>,<span class="comment">//修改URL的分隔符</span></span><br></pre></td></tr></table></figure>

<h2 id="ThinkPHP3的输出"><a href="#ThinkPHP3的输出" class="headerlink" title="ThinkPHP3的输出"></a>ThinkPHP3的输出</h2><ul>
<li><p>PHP原生输出，例如echo，dump之类；</p>
</li>
<li><p>通过display方法输出，代码形式一般为<code>$this-&gt;display()</code>，还可以通过<code>$this-&gt;assign(&#39;data&#39;,$data)</code>将<code>$data</code>的值传递给前端页面显示，当需要接受后端传来的值时，前端代码需要写上<code>{$data}</code>这里的<code>$data</code>需要和单引号里的<code>data</code>同名，花括号为界定符号。可以在配置文件中进行修改。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'TMPL_L_DELIM'</span>=&gt;<span class="string">'&lt;&#123;'</span>, <span class="comment">//修改左定界符</span></span><br><span class="line"><span class="string">'TMPL_R_DELIM'</span>=&gt;<span class="string">'&#125;&gt;'</span>, <span class="comment">//修改右定界符</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>通过show方法也可以进行输出，代码形式<code>$this-&gt;show(&#39;输出用例&#39;)</code></p>
</li>
</ul>
<h2 id="模型的使用"><a href="#模型的使用" class="headerlink" title="模型的使用"></a>模型的使用</h2><p>一个简单的信息管理系统，无非就是对数据库进行增删查改。Thinkphp3提供了Model类，但由于是事先已经实现好的，只能进行增删查改的功能，并不具备其他的业务功能。如果需要封装一些自己的业务功能，则需要定义自己的模型。</p>
<blockquote>
<p>定义的模型类通常都是放到项目的Lib\Model目录下面。例如，<code>&lt;?php
 class UserModel extends Model{
     public function getTopUser(){
         //添加自己的业务逻辑
          // ...
     }
 }</code></p>
</blockquote>
<p>Model类的使用方法很简单</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$m = <span class="keyword">new</span> Model();</span><br><span class="line">$User = M(); <span class="comment">//M为快捷方法，效果和上一条是一样的。</span></span><br><span class="line">当对Model进行实例化以后，就可以进行CDUR操作了</span><br><span class="line">    增 -C Create $m-&gt;add()</span><br><span class="line">	删 -D Delete $m-&gt;delete()</span><br><span class="line">	改 -U Update $m-&gt;save()</span><br><span class="line">	查 -R Read   $m-&gt;select()</span><br></pre></td></tr></table></figure>

<p>查看mode类的源码其实可以发现其中的构造函数是可以带参数的。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Model</span> </span>&#123;</span><br><span class="line"> ····</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">($name=<span class="string">''</span>,$tablePrefix=<span class="string">''</span>,$connection=<span class="string">''</span>)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 模型初始化</span></span><br></pre></td></tr></table></figure>

<p><code>$name</code>为表名，<code>$tablePrefix</code>为表前缀。表前缀用于区分该表属于哪个项目的。</p>
<p>当需要使用数据库，毫无例外的需要对数据库进行连接，需要在配置文件config.php中进行配置。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">	<span class="string">'DB_TYPE'</span>=&gt;<span class="string">'mysql'</span>,   <span class="comment">//设置数据库类型</span></span><br><span class="line">	<span class="string">'DB_HOST'</span>=&gt;<span class="string">'localhost'</span>,<span class="comment">//设置主机</span></span><br><span class="line">	<span class="string">'DB_NAME'</span>=&gt;<span class="string">'thinkphp'</span>,<span class="comment">//设置数据库名</span></span><br><span class="line">	<span class="string">'DB_USER'</span>=&gt;<span class="string">'root'</span>,    <span class="comment">//设置用户名</span></span><br><span class="line">	<span class="string">'DB_PWD'</span>=&gt;<span class="string">''</span>,        <span class="comment">//设置密码</span></span><br><span class="line">	<span class="string">'DB_PORT'</span>=&gt;<span class="string">'3306'</span>,   <span class="comment">//设置端口号</span></span><br><span class="line">	<span class="string">'DB_PREFIX'</span>=&gt;<span class="string">'tp_'</span>,  <span class="comment">//设置表前缀</span></span><br><span class="line">还有一种配置方式</span><br><span class="line">    <span class="string">'DB_DSN'</span>=&gt;<span class="string">'mysql://root:@localhost:3306/thinkphp'</span>,<span class="comment">//使用DSN方式配置数据库信息</span></span><br><span class="line">此条效果和上面所有是一样的。当DSN方式和普通方式共存时，以DSN方式为准。</span><br></pre></td></tr></table></figure>

<p>如果没有设置表前缀，默认的会是<code>think_</code>。</p>
<p>当对数据库连接等操作完毕以后，查询到的结果集通常是一个二维数组，<br>便可以通过模板输出的方式<code>$this-&gt;assgin(&#39;data&#39;,$arr); $this-&gt;display();</code>输出到前端页面。相应的，前段页面需要一定的代码来对接受这个二维数组，以及对这个二维数组进行解包遍历。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;volist name=<span class="string">'data'</span> id=<span class="string">'vo'</span>&gt;</span><br><span class="line">			&lt;&#123;$vo.id&#125;&gt;----&lt;&#123;$vo.username&#125;&gt;-----&lt;&#123;$vo.sex&#125;&gt;&lt;br/&gt;</span><br><span class="line">&lt;/volist&gt;</span><br></pre></td></tr></table></figure>

<p><strong>注：此处的界定符已经改为了&lt;{}&gt;并非原先的{}</strong></p>
<h4 id="开启debug模式和show-page-trace"><a href="#开启debug模式和show-page-trace" class="headerlink" title="开启debug模式和show_page_trace"></a>开启debug模式和show_page_trace</h4><p>开启debug功能有利于我们对错误的定位和修改。需要在入口文件index.php加上</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="string">'APP_DEBUG'</span>,<span class="keyword">true</span>);</span><br></pre></td></tr></table></figure>

<p>开启这trace功能有利于我们对sql语句的查看，修改，以及报错原因的分析。开启方法只需要在config.php文件中加上</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'SHOW_PAGE_TRACE'</span>=&gt;<span class="keyword">true</span>,<span class="comment">//开启页面Trace</span></span><br></pre></td></tr></table></figure>

<h2 id="对数据库进行增删查改"><a href="#对数据库进行增删查改" class="headerlink" title="对数据库进行增删查改"></a>对数据库进行增删查改</h2><h3 id="对数据进行读取"><a href="#对数据进行读取" class="headerlink" title="对数据进行读取"></a>对数据进行读取</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$m = <span class="keyword">new</span> Model(<span class="string">'User'</span>); <span class="comment">//由于在config.php中配置了表前缀，此处只需要传入表名</span></span><br><span class="line"><span class="comment">//$m = M('User'); 两条语句等价</span></span><br><span class="line">$arr = $m-&gt;select();<span class="comment">//查询到所有数据，相当于select * from user。结果集是个二维数组</span></span><br><span class="line">$rst = $m-&gt;find($id); <span class="comment">//可以获取单条数据，相当于加上了limit限制，find中可以加参数</span></span><br><span class="line">$arr = $m-&gt;where(<span class="string">'id=2'</span>)-&gt;getField(<span class="string">'username'</span>);<span class="comment">//相当于 select username from user where id='2'</span></span><br></pre></td></tr></table></figure>

<h3 id="增加新的数据"><a href="#增加新的数据" class="headerlink" title="增加新的数据"></a>增加新的数据</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$m = <span class="keyword">new</span> Model(<span class="string">'User'</span>); <span class="comment">//由于在config.php中配置了表前缀，此处只需要传入表名</span></span><br><span class="line"><span class="comment">//$m = M('User'); 两条语句等价</span></span><br><span class="line">$m-&gt;username = <span class="string">"zhhhy"</span>;   <span class="comment">//$m-&gt;字段名 = 值</span></span><br><span class="line">$m-&gt;add();</span><br><span class="line"><span class="comment">//add方法会有一个返回值，返回的是创建完数据的$id号。似乎thinkphp3对表的要求需要一个id字段，没试过没有id的情况，之后试试。</span></span><br></pre></td></tr></table></figure>

<h3 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$m = <span class="keyword">new</span> Model(<span class="string">'User'</span>); <span class="comment">//由于在config.php中配置了表前缀，此处只需要传入表名</span></span><br><span class="line"><span class="comment">//$m = M('User'); 两条语句等价</span></span><br><span class="line">$m-&gt;delete(<span class="number">2</span>);               <span class="comment">//删除id为2的数据</span></span><br><span class="line"><span class="comment">//同样的也可以删除用别的字段作为条件的数据</span></span><br><span class="line">$m-&gt;delete(<span class="string">'username="zhhhy"'</span>); </span><br><span class="line">$m-&gt;where(<span class="string">'id=2'</span>)-&gt;delete(); <span class="comment">//与上面效果相同，也是删除id为2的数据</span></span><br><span class="line"><span class="comment">//返回值是受影响行数</span></span><br></pre></td></tr></table></figure>

<h3 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$m = <span class="keyword">new</span> Model(<span class="string">'User'</span>); <span class="comment">//由于在config.php中配置了表前缀，此处只需要传入表名</span></span><br><span class="line"><span class="comment">//$m = M('User'); 两条语句等价</span></span><br><span class="line">$data[<span class="string">'id'</span>]=<span class="number">1</span>;</span><br><span class="line">$data[<span class="string">'username'</span>]=<span class="string">'zhy'</span>；</span><br><span class="line">$m-&gt;save($data);</span><br><span class="line"><span class="comment">// 返回值是受影响行数，不需要每个字段都有值，</span></span><br></pre></td></tr></table></figure>

<p>到此掌握了对数据库的增删查改，也可以将数据在前端页面遍历输出，已经可以写一个简单基础的信息管理系统。</p>
<h2 id="花式查询"><a href="#花式查询" class="headerlink" title="花式查询"></a>花式查询</h2><p>把模糊查询，复杂一点点的条件查询随便一下叫个花式查询。<br>虽然前面的查询方式已经足够满足一些基础的功能了，但是，例如学生管理系统查询及格人数之类的，还不能够满足。因此需要用如下的查询。</p>
<h4 id="普通的查询方式"><a href="#普通的查询方式" class="headerlink" title="普通的查询方式"></a>普通的查询方式</h4><ul>
<li><p>字符串</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$arr=$m-&gt;where(<span class="string">"sex=0 and username='gege'"</span>)-&gt;find();</span><br><span class="line"><span class="comment">//等效于  select * from user sex=0 and username='gege' limit 0,1;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>数组</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$data[<span class="string">'sex'</span>]=<span class="number">0</span>;</span><br><span class="line">$data[<span class="string">'username'</span>]=<span class="string">'gege'</span>;</span><br><span class="line">$arr=$m-&gt;where($data)-&gt;find();</span><br><span class="line"><span class="comment">//注意：这种方式默认是and的关系，如果使用or关系，需要添加数组值</span></span><br><span class="line">$data[<span class="string">'sex'</span>]=<span class="number">0</span>;</span><br><span class="line">$data[<span class="string">'username'</span>]=<span class="string">'gege'</span>;</span><br><span class="line">$data[<span class="string">'_logic'</span>]=<span class="string">'or'</span>;</span><br><span class="line">$arr=$m-&gt;where($data)-&gt;find();</span><br><span class="line"><span class="comment">//等效于 select * from user sex=0 or username='gege' limit 0,1;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="表达式查询方式"><a href="#表达式查询方式" class="headerlink" title="表达式查询方式"></a>表达式查询方式</h4><p>EQ 等于</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$data[<span class="string">'id'</span>]=<span class="keyword">array</span>(<span class="string">'eq'</span>,<span class="number">6</span>);</span><br><span class="line">$arr=$m-&gt;where($data)-&gt;select();</span><br><span class="line"><span class="comment">//等价于 select * from user where id=6;</span></span><br></pre></td></tr></table></figure>

<p>NEQ不等于</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$data[<span class="string">'id'</span>]=<span class="keyword">array</span>(<span class="string">'neq'</span>,<span class="number">6</span>);</span><br><span class="line">$arr=$m-&gt;where($data)-&gt;select();</span><br><span class="line"><span class="comment">//等价于 select * from user where id!=6;</span></span><br></pre></td></tr></table></figure>

<p>GT 大于</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$data[<span class="string">'id'</span>]=<span class="keyword">array</span>(<span class="string">'gt'</span>,<span class="number">6</span>);</span><br><span class="line">$arr=$m-&gt;where($data)-&gt;select();</span><br><span class="line"><span class="comment">//等价于 select * from user where id&gt;6;</span></span><br></pre></td></tr></table></figure>

<p>EGT大于等于</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$data[<span class="string">'id'</span>]=<span class="keyword">array</span>(<span class="string">'egt'</span>,<span class="number">6</span>);</span><br><span class="line">$arr=$m-&gt;where($data)-&gt;select();</span><br><span class="line"><span class="comment">//等价于 select * from user where id&gt;=6;</span></span><br></pre></td></tr></table></figure>

<p>LT 小于</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$data[<span class="string">'id'</span>]=<span class="keyword">array</span>(<span class="string">'lt'</span>,<span class="number">6</span>);</span><br><span class="line">$arr=$m-&gt;where($data)-&gt;select();</span><br><span class="line"><span class="comment">//等价于 select * from user where id&lt;6;</span></span><br></pre></td></tr></table></figure>

<p>ELT小于等于</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$data[<span class="string">'id'</span>]=<span class="keyword">array</span>(<span class="string">'elt'</span>,<span class="number">6</span>);</span><br><span class="line">$arr=$m-&gt;where($data)-&gt;select();</span><br><span class="line"><span class="comment">//等价于 select * from user where id&lt;=6;</span></span><br></pre></td></tr></table></figure>

<p>LIKE 模糊查询</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$data[<span class="string">'username'</span>]=<span class="keyword">array</span>(<span class="string">'like'</span>,<span class="string">'%ge'</span>);</span><br><span class="line">$arr=$m-&gt;where($data)-&gt;select();</span><br><span class="line"><span class="comment">// 等价于 select * from user where username like '%ge';</span></span><br></pre></td></tr></table></figure>

<p>NOTLIKE</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$data[<span class="string">'username'</span>]=<span class="keyword">array</span>(<span class="string">'notlike'</span>,<span class="string">'%ge%'</span>); <span class="comment">//notlike中间没有空格</span></span><br><span class="line">$arr=$m-&gt;where($data)-&gt;select();</span><br><span class="line"><span class="comment">// 等价于 select * from user where username not like '%ge';</span></span><br></pre></td></tr></table></figure>

<p>BETWEEN</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$data[<span class="string">'id'</span>]=<span class="keyword">array</span>(<span class="string">'between'</span>,<span class="keyword">array</span>(<span class="number">5</span>,<span class="number">7</span>));</span><br><span class="line">$arr=$m-&gt;where($data)-&gt;select();</span><br><span class="line"><span class="comment">//SELECT * FROM `tp_user` WHERE ( (`id` BETWEEN 5 AND 7 ) )  </span></span><br><span class="line">$data[<span class="string">'id'</span>]=<span class="keyword">array</span>(<span class="string">'not between'</span>,<span class="keyword">array</span>(<span class="number">5</span>,<span class="number">7</span>));<span class="comment">//注意，not 和 between中间一定要有空格</span></span><br><span class="line">$arr=$m-&gt;where($data)-&gt;select();</span><br></pre></td></tr></table></figure>

<p>IN</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$data[<span class="string">'id'</span>]=<span class="keyword">array</span>(<span class="string">'in'</span>,<span class="keyword">array</span>(<span class="number">4</span>,<span class="number">6</span>,<span class="number">7</span>));</span><br><span class="line">$arr=$m-&gt;where($data)-&gt;select();</span><br><span class="line"><span class="comment">//SELECT * FROM `tp_user` WHERE ( `id` IN (4,6,7) )</span></span><br><span class="line"></span><br><span class="line">$data[<span class="string">'id'</span>]=<span class="keyword">array</span>(<span class="string">'not in'</span>,<span class="keyword">array</span>(<span class="number">4</span>,<span class="number">6</span>,<span class="number">7</span>));</span><br><span class="line">$arr=$m-&gt;where($data)-&gt;select();</span><br><span class="line"><span class="comment">//SELECT * FROM `tp_user` WHERE ( `id` NOT IN (4,6,7) )</span></span><br></pre></td></tr></table></figure>

<h4 id="区间查询"><a href="#区间查询" class="headerlink" title="区间查询"></a>区间查询</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$data[<span class="string">'id'</span>]=<span class="keyword">array</span>(<span class="keyword">array</span>(<span class="string">'gt'</span>,<span class="number">4</span>),<span class="keyword">array</span>(<span class="string">'lt'</span>,<span class="number">10</span>));<span class="comment">//默认关系是 and 的关系</span></span><br><span class="line"><span class="comment">//SELECT * FROM `tp_user` WHERE ( (`id` &gt; 4) AND (`id` &lt; 10) ) </span></span><br><span class="line">$data[<span class="string">'id'</span>]=<span class="keyword">array</span>(<span class="keyword">array</span>(<span class="string">'gt'</span>,<span class="number">4</span>),<span class="keyword">array</span>(<span class="string">'lt'</span>,<span class="number">10</span>),<span class="string">'or'</span>) <span class="comment">//关系就是or的关系</span></span><br><span class="line"><span class="comment">//select * from `tp_user` where（（`id&gt;4`）or (`id`&lt;10)）</span></span><br><span class="line">$data[<span class="string">'name'</span>]=<span class="keyword">array</span>(<span class="keyword">array</span>(<span class="string">'like'</span>,<span class="string">'%2%'</span>),<span class="keyword">array</span>(<span class="string">'like'</span>,<span class="string">'%五%'</span>),<span class="string">'gege'</span>,<span class="string">'or'</span>);</span><br><span class="line"><span class="comment">//select * from `tp_user` where( name like '%2%' or name like '%五%' or name='gege')</span></span><br></pre></td></tr></table></figure>

<h4 id="统计查询"><a href="#统计查询" class="headerlink" title="统计查询"></a>统计查询</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">count <span class="comment">//获取个数</span></span><br><span class="line">max   <span class="comment">//获取最大数</span></span><br><span class="line">min   <span class="comment">//获取最小数</span></span><br><span class="line">avg   <span class="comment">//获取平均数</span></span><br><span class="line">sum   <span class="comment">//获取总和</span></span><br></pre></td></tr></table></figure>

<h2 id="连贯操作"><a href="#连贯操作" class="headerlink" title="连贯操作"></a>连贯操作</h2><p><strong>ThinkPHP模型基础类提供的连贯操作方法，可以有效的提高数据存取的代码清晰度和开发效率，并且支持所有的CURD操作。</strong></p>
<p>具体解释和使用可以参看完全开发手册。</p>
<p>仅记录一下<strong>连贯操作是如何实现的</strong>,以实现Model类为例，当以后需要自定义模型类时，便可以编写出这种连贯操作的代码</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//首先 在Model文件夹中创建 Model.class.php</span></span><br><span class="line"><span class="comment">//编辑Model类</span></span><br><span class="line">	error_reporting(<span class="number">0</span>);</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Model</span></span>&#123;</span><br><span class="line">    <span class="comment">//假设Model可以传入表名$tablename,条件$where，执行的sql语句$sql</span></span><br><span class="line">    <span class="comment">//先定义以上变量并且赋值</span></span><br><span class="line">    <span class="keyword">private</span> $tablename = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> $where = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> $sql = <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">//Model是对数据库进行操作的，必然需要对数据库进行连接。这里我们使用构造函数使得在实例化model对象的时候自动连接数据库。</span></span><br><span class="line">    <span class="comment">//model是可以在实例传入表名的，因此要加上变量</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">($tablename)</span></span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;tablename = $tablename;</span><br><span class="line">        mysql_connect(<span class="string">"localhost"</span>,<span class="string">"root"</span>,<span class="string">"root"</span>);<span class="comment">//使用原生的连接数据库方式</span></span><br><span class="line">        mysql_select_db(<span class="string">'tp3'</span>);</span><br><span class="line">      	<span class="comment">// 这样在 $m = new Model('user');的时候就已经完成了数据库的链接，并且传入了表名</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 接下来查询所有数据的代码是 $rst = $m-&gt;select(); 因此需要select方法</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">select</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// select * from tp_user where xxxx;</span></span><br><span class="line">        <span class="comment">// tp_是表前缀，在config里设置好。但是这边简单实现，在代码里写死</span></span><br><span class="line">		<span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="keyword">$this</span>-&gt;where)&amp;&amp;<span class="keyword">$this</span>-&gt;where!=<span class="string">''</span>)</span><br><span class="line">			<span class="keyword">$this</span>-&gt;sql = <span class="string">'select * from tp_'</span>.strtolower(<span class="keyword">$this</span>-&gt;tablename).<span class="string">" where $this-&gt;where;"</span>;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			<span class="keyword">$this</span>-&gt;sql = <span class="string">'select * from tp_'</span>.strtolower(<span class="keyword">$this</span>-&gt;tablename).<span class="string">';'</span>;</span><br><span class="line">		<span class="comment">//echo "&lt;br&gt;",$sql,"&lt;br&gt;";</span></span><br><span class="line">        <span class="comment">//执行查询</span></span><br><span class="line">		$db = mysql_query(<span class="string">"select database();"</span>);</span><br><span class="line">		$res = mysql_fetch_assoc($db);</span><br><span class="line">		<span class="keyword">if</span>($db==<span class="keyword">false</span>)</span><br><span class="line">			<span class="keyword">echo</span> mysql_error(),<span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">		<span class="comment">//var_dump($res);</span></span><br><span class="line">        $result = mysql_query(<span class="keyword">$this</span>-&gt;sql);</span><br><span class="line">		<span class="keyword">if</span>($result==<span class="keyword">false</span>)&#123;</span><br><span class="line">			<span class="keyword">echo</span> mysql_error();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//var_dump($result);</span></span><br><span class="line">        <span class="comment">//用一个数组将结果集存好便于传递</span></span><br><span class="line">        $arr = <span class="keyword">array</span>();</span><br><span class="line">        <span class="keyword">if</span>($result&amp;&amp;mysql_num_rows($result)&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">while</span>($res = mysql_fetch_assoc($result))&#123;</span><br><span class="line">                $arr[]=$res;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//将整个数组作为返回值</span></span><br><span class="line">        <span class="keyword">return</span> $arr;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 再接着 就是 $m-&gt;where()-&gt;select(); 连贯操作的部分了。</span></span><br><span class="line">    <span class="comment">//先分析， $m是model的对象 用-&gt;说明where()是model的方法，同样说明select()是$m-&gt;where()的方法。因此很明显，where方法的返回值是一个Model类的对象</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">where</span><span class="params">($where)</span></span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;where = $where;</span><br><span class="line">        <span class="comment">//返回值既然是一个Model对象，因此把自身对象返回即可</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//到此就实现了简单的连贯操作，此处的sql语句也许在别处有用处写个函数将它取出</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Getsql</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;sql;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// M方法是new Model()的方便形式</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">M</span><span class="params">($tablename)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Model($tablename);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 一个简单的有连贯操作的模型类就这样定义完成了。</span></span><br><span class="line">$m = <span class="keyword">new</span> Model(<span class="string">'user'</span>);</span><br><span class="line">$arr = $m-&gt;where(<span class="string">'id &lt; 2'</span>)-&gt;select();</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">var_dump($m-&gt;Getsql());</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">var_dump($arr);</span><br><span class="line"><span class="comment">//echo $m-&gt;Getsql();</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>注：其中有部分代码并非必须的，是在调试报错的时候留下的</strong></p>
<p>thinkphp3提供了很多种的连贯操作。是的对数据库的操作变得简单。暂时先接触到增删查改的相关操作，之后再慢慢深入吧。</p>
<h2 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h2><p>视图就是View。也就是前端所展示的页面。</p>
<h3 id="模板的使用"><a href="#模板的使用" class="headerlink" title="模板的使用"></a>模板的使用</h3><ul>
<li><p>规则</p>
<p>例如:localhost/tp3/Index/index 这是调用了Index模块中的index方法。当index方法中写了<code>$this-&gt;display()</code>则默认的会就会展示出index.html的页面。这个页面需要事先创建好，<strong>路径是TPL/Index/index.html</strong>。注意路径和URL的关系。默认是html为后缀。如果需要修改，则在config.php中进行修改</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'TMPL_TEMPLATE_SUFFIX'</span>=&gt;<span class="string">'.html'</span>,<span class="comment">//更改模板文件后缀名</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>由于需要建一个和模块名相同文件夹，再将和方法名相同的模板文件放入该文件夹，也许有人会觉得目录过深，因此TP3给了一个修改目录结构的方法。</p>
<p><code>将原先的TPL/Index/index.html修改成TPL/Index_index.html</code>，在config.php中进行修改。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'TMPL_FILE_DEPR'</span>=&gt;<span class="string">'_'</span>,<span class="comment">//修改模板文件目录层次</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>模板主题</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'DEFAULT_THEME'</span>=&gt;<span class="string">'your'</span>,<span class="comment">//设置默认模板主题</span></span><br></pre></td></tr></table></figure>

<p>需要在TPL下面新建一个your文件夹作为模板主题文件夹<br>如何动态修改模板主题？</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1、在后台准备一个功能，修改config.php文件中的默认模板项</span></span><br><span class="line"><span class="comment">//2、通过url传递 t=主题 参数可以修改不同的模板</span></span><br><span class="line"><span class="string">'DEFAULT_THEME'</span>=&gt;<span class="string">'your'</span>,<span class="comment">//设置默认模板主题</span></span><br><span class="line"><span class="string">'TMPL_DETECT_THEME'</span>=&gt;<span class="keyword">true</span>,<span class="comment">//自动侦测模板主题</span></span><br><span class="line"><span class="string">'THEME_LIST'</span>=&gt;<span class="string">'your,my'</span>,<span class="comment">//支持的模板主题列表</span></span><br></pre></td></tr></table></figure>

<p>在控制器中，也就是IndexAction.class.php里</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IndexAction</span> <span class="keyword">extends</span> <span class="title">Action</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">index</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">$this</span>-&gt;display(<span class="string">'my:Index:index'</span>);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>这种方式就可以访问到路径在TPL/my/Index/index的模板了。</p>
<p>这一部分还不是特别理解。希望之后在实例学习的时候能接触到。</p>
</li>
</ul>
<h3 id="模板输出"><a href="#模板输出" class="headerlink" title="模板输出"></a>模板输出</h3><p>前面的时候写tp3的输出时就已经提到一些模板输出了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">a、display</span><br><span class="line">	1.display中没有参数</span><br><span class="line">		$this-&gt;display();</span><br><span class="line">	2.可以带参数</span><br><span class="line">		$this-&gt;display(本模块文件夹下的其他模板文件);</span><br><span class="line">		$this-&gt;display(&apos;index2&apos;);</span><br><span class="line"></span><br><span class="line">		$this-&gt;display(其他文件夹下的模板文件);</span><br><span class="line">		$this-&gt;display(&apos;Public:error&apos;);//注意，仅仅需要在Tpl下有Public文件夹以及其中的error.html即可，不需要一定有Public模块</span><br><span class="line"></span><br><span class="line">		$this-&gt;display(其他主题下的 文件夹下的 模板文件);//需要开启主题支持</span><br><span class="line">		$this-&gt;display(&apos;my:Index:index&apos;);</span><br></pre></td></tr></table></figure>

<ul>
<li><p>display<br>display可以带参数也可以不带参数，最基本的用法就是$this-&gt;display()输出的当前模块方法对应的模板。模板路径是TPL/模块名/方法名.html<br>带参数的display可以输出很多种。</p>
<ul>
<li>$this-&gt;display(‘index2’); //输出的模板路径为TPL/模块名/index2.html <strong>值得注意的是，同模块名不同的方法名的模板文件</strong></li>
<li>$this-&gt;display(‘Public:error’);//<strong>注意，仅仅需要在Tpl下有Public文件夹以及其中的error.html即可，不需要一定有Public模块</strong> 这个可以作为公共页面的输出方法</li>
<li>$this-&gt;display(‘my:Index:index’);//需要开启上文提到的主题支持，模板输出的路径是TPL/my/Index/index.html</li>
<li>$this-&gt;display(‘./Public/error.html’);//注意这个和上面的public不一样！路径不一样</li>
<li>$this-&gt;display(‘./Public/error.html’,’utf-8’,’text/xml’);//给输出的页面加上编码，和文本输出。</li>
</ul>
</li>
<li><p>fetch</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获得模板文件中的内容，以字符串形式返回</span></span><br><span class="line">$content=<span class="keyword">$this</span>-&gt;fetch(<span class="string">'Public:error'</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>show<br>不需要模板文件，可以直接输出模板内容</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$content=<span class="keyword">$this</span>-&gt;fetch(<span class="string">'Public:error'</span>);</span><br><span class="line">dump($content); <span class="comment">//用来查看获取到字符串</span></span><br><span class="line">$content=str_replace(<span class="string">'h1'</span>,<span class="string">'i'</span>,$content);<span class="comment">//将字符串中h1替换成i</span></span><br><span class="line"><span class="keyword">$this</span>-&gt;show($content);</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="模板赋值"><a href="#模板赋值" class="headerlink" title="模板赋值"></a>模板赋值</h3><p>以下代码是写在控制器中的</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//$this-&gt;assign('name','zhhhy');</span></span><br><span class="line"><span class="keyword">$this</span>-&gt;name=<span class="string">'zhhhy'</span>;</span><br><span class="line"><span class="keyword">$this</span>-&gt;display();</span><br></pre></td></tr></table></figure>

<p>模板中需要用界定符＋$name来获取,例如</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;$name&#125;</span><br></pre></td></tr></table></figure>

<h3 id="模板替换"><a href="#模板替换" class="headerlink" title="模板替换"></a>模板替换</h3><p>其实就是一些固定的常量可以被替换，提高了项目移植的灵活性。。我瞎猜的。</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">__PUBLIC__：会被替换成当前网站的公共目录 通常是 /Public/</span><br><span class="line">__ROOT__： 会替换成当前网站的地址（不含域名） </span><br><span class="line">__APP__： 会替换成当前项目的URL地址 （不含域名）</span><br><span class="line">__GROUP__：会替换成当前分组的URL地址 （不含域名）</span><br><span class="line">__URL__： 会替换成当前模块的URL地址（不含域名）</span><br><span class="line">__ACTION__：会替换成当前操作的URL地址 （不含域名）</span><br><span class="line">__SELF__： 会替换成当前的页面URL</span><br></pre></td></tr></table></figure>

<p><strong>（注：为了部署安全考虑，../Public和<strong>TMPL</strong>不再建议使用）</strong> 所以没列出来<br>如果无法理解，可以将这些模板常量输出出来看看得到的输出是什么。</p>
<p>除去事先定义好的这些常量，我们还可以自定义自己的模板常量</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//更换模板变量规则，修改配置项</span></span><br><span class="line">		<span class="string">'TMPL_PARSE_STRING'</span>=&gt;<span class="keyword">array</span>(           <span class="comment">//添加自己的模板变量规则</span></span><br><span class="line">		<span class="string">'__CSS__'</span>=&gt;__ROOT__.<span class="string">'/Public/Css'</span>,</span><br><span class="line">		<span class="string">'__JS__'</span>=&gt;__ROOT__.<span class="string">'/Public/Js'</span>,</span><br><span class="line">	),</span><br></pre></td></tr></table></figure>

<h3 id="模板变量"><a href="#模板变量" class="headerlink" title="模板变量"></a>模板变量</h3><ul>
<li>标量输出</li>
<li>数组输出<br>{$data[‘username’]}<br>{$data.username}<br>{$data[0]}</li>
<li>对象输出<br>{$user:name}<br>{$user-&gt;name}</li>
</ul>
<h3 id="模板标签"><a href="#模板标签" class="headerlink" title="模板标签"></a>模板标签</h3><p>Thinkphp3提供了一些标签能过实现导入文件，分支结构，循环结构。</p>
<ul>
<li><p>当两个前端页面有很大一部分相同时，可以将相同的代码存放在公共部分，然后通过分别导入的方式实现调用。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">--例如，一个网站的css和js通常放在一个公共文件夹下--</span>&gt;</span></span><br><span class="line">1.css link方式和js src方式</span><br><span class="line">		<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">'stylesheet'</span> <span class="attr">type</span>=<span class="string">'text/css'</span> <span class="attr">href</span>=<span class="string">'__PUBLIC__/Css/test.css'</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'__PUBLIC__/Js/test.js'</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">2.import</span><br><span class="line">		<span class="tag">&lt;<span class="name">import</span> <span class="attr">type</span>=<span class="string">'js'</span> <span class="attr">file</span>=<span class="string">'Js.test'</span> /&gt;</span> //导入Public文件夹下面的Js目录中的test.js文件，import标签可以省略type属性，默认就是js的</span><br><span class="line">		<span class="tag">&lt;<span class="name">import</span> <span class="attr">type</span>=<span class="string">'css'</span> <span class="attr">file</span>=<span class="string">'Css.test'</span> /&gt;</span></span><br><span class="line">		//可以更改默认文件夹 设置basepath属性</span><br><span class="line">		<span class="tag">&lt;<span class="name">import</span> <span class="attr">type</span>=<span class="string">'js'</span> <span class="attr">file</span>=<span class="string">'Js.my'</span> <span class="attr">basepath</span>=<span class="string">'./Other'</span>/&gt;</span> //当前目录的Other/Js/my.js</span><br><span class="line">3.load</span><br><span class="line">		//方法可以自动检测导入的文件类型</span><br><span class="line">		<span class="tag">&lt;<span class="name">load</span> <span class="attr">href</span>=<span class="string">'__PUBLIC__/Js/test.js'</span> /&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>分支结构，就是<strong>if-else</strong>这样的条件标签</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">1、if 标签是双标签，成对出现。condition为条件。</span><br><span class="line">	&lt;if condition=&apos;$sex eq &quot;男&quot;&apos;&gt;</span><br><span class="line">		男人</span><br><span class="line">		&lt;else /&gt;</span><br><span class="line">		女人</span><br><span class="line">	&lt;/if&gt;</span><br><span class="line">	&lt;if condition=&apos;$age lt 18&apos;&gt;</span><br><span class="line">		未成年</span><br><span class="line">		&lt;elseif  condition=&apos;$age eq 18&apos;/&gt;</span><br><span class="line">		青春年少</span><br><span class="line">		&lt;else /&gt;</span><br><span class="line">		成年</span><br><span class="line">	&lt;/if&gt;</span><br><span class="line">	&gt;  gt</span><br><span class="line">	&lt;  lt</span><br><span class="line">	== eq</span><br><span class="line">	&lt;= elt</span><br><span class="line">	&gt;= egt</span><br><span class="line">	!= neq</span><br><span class="line">	=== heq</span><br><span class="line">	!== nheq</span><br><span class="line">2.switch 双标签，name的值表示后台通过该值传值。</span><br><span class="line">	&lt;switch name=&apos;number&apos;&gt;</span><br><span class="line">		&lt;case value=&apos;1&apos;&gt;一个和尚挑水吃&lt;/case&gt;</span><br><span class="line">		&lt;case value=&apos;2&apos;&gt;两个和尚台水吃&lt;/case&gt;</span><br><span class="line">		&lt;case value=&apos;3&apos;&gt;三个和尚没水吃&lt;/case&gt;</span><br><span class="line">		&lt;default/&gt; 这里是默认值</span><br><span class="line">	&lt;/switch&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>循环结构</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">1.for 双表情 相当于 for(j=0;j&gt;0;j=j-2)</span><br><span class="line">	&lt;table border=&apos;1&apos; width=&apos;500&apos;&gt;</span><br><span class="line">		&lt;for start=&apos;10&apos; end=&apos;00&apos; name=&apos;j&apos; step=&apos;-2&apos; comparison=&apos;gt&apos;&gt;</span><br><span class="line">			&lt;tr&gt;&lt;td&gt;&#123;$j&#125;&lt;/td&gt;&lt;td&gt;abc&lt;/td&gt;&lt;/tr&gt;</span><br><span class="line">		&lt;/for&gt;</span><br><span class="line">	&lt;/table&gt;</span><br><span class="line">2.volist</span><br><span class="line">	&lt;volist name=&apos;list&apos; id=&apos;v&apos;&gt;</span><br><span class="line">		&#123;$v.username&#125;&lt;br/&gt;</span><br><span class="line">	&lt;olist&gt;</span><br><span class="line">3.foreach</span><br><span class="line">	&lt;foreach name=&apos;list&apos; item=&apos;v&apos; key=&apos;k&apos;&gt;</span><br><span class="line">		&#123;$k&#125;-------&#123;$v&#125;&lt;br/&gt;</span><br><span class="line">	&lt;/foreach&gt;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><strong>这一部分比较多且杂也比较简单，具体的参看完全开发手册模板引擎部分</strong></p>
<h3 id="模板渲染"><a href="#模板渲染" class="headerlink" title="模板渲染"></a>模板渲染</h3><p>此处理解不是很清楚，大概就是可以用一个渲染页面来渲染另一个页面。比如渲染页面里规定好了样式，图案等。被渲染页面提供具体的文字数据等内容。</p>
<h2 id="控制器"><a href="#控制器" class="headerlink" title="控制器"></a>控制器</h2><ul>
<li><p>空操作<br>Index模块下有index方法。当我们访问localhost/tp3/index.php/Index/index时就能顺利访问。假如这时我们访问/Index/login，毫不意外的会报错。由于并没有定义login方法，导致报错。那为了程序的健壮和美观，总不能总是出现报错。于是就可以使用空操作进行解决。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// CityAction.class.php内容如下</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">CityAction</span> <span class="keyword">extends</span> <span class="title">Action</span></span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">_empty</span><span class="params">($name)</span></span>&#123;</span><br><span class="line">            <span class="comment">//把所有城市的操作解析到city方法</span></span><br><span class="line">            <span class="keyword">$this</span>-&gt;city($name);</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="comment">//注意 city方法 本身是 protected 方法</span></span><br><span class="line">        <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">city</span><span class="params">($name)</span></span>&#123;</span><br><span class="line">            <span class="comment">//和$name这个城市相关的处理</span></span><br><span class="line">             <span class="keyword">echo</span> <span class="string">'当前城市'</span> . $name;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//这样就实现了当前城市的切换。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_empty</span><span class="params">($name)</span></span>&#123;</span><br><span class="line">			<span class="keyword">$this</span>-&gt;show(<span class="string">"$name 不存在 &lt;a href='__APP__/Index/index'&gt;返回首页&lt;/a&gt;"</span>);</span><br><span class="line">		&#125;</span><br><span class="line"><span class="comment">//这样就实现了一个当不存在某个城市的时候，程序能够正常执行。</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>控模块<br>既然空操作是找不到对应的方法，空模块就是找不到对应的类了。按照原先控制器的定义，每一个模块都要对应一个Action的类，那么一百个城市就需要一百个类，这显然是不理智的。空操作已经可以解决这样的问题，那空模块同样可以解决。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//EmptyAction.class.php</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">EmptyAction</span> <span class="keyword">extends</span> <span class="title">Action</span></span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">index</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="comment">//根据当前模块名来判断要执行那个城市的操作</span></span><br><span class="line">            <span class="comment">//由于找不到对应模块，则执行EmptyAction的index方法</span></span><br><span class="line">            <span class="comment">//MODULE_NAME可以取得当前URL的模块名</span></span><br><span class="line">             $cityName = MODULE_NAME;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;city($cityName);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//注意 city方法 本身是 protected 方法</span></span><br><span class="line">        <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">city</span><span class="params">($name)</span></span>&#123;</span><br><span class="line">            <span class="comment">//和$name这个城市相关的处理</span></span><br><span class="line">             <span class="keyword">echo</span> <span class="string">'当前城市'</span> . $name;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>前置操作<br>在当前Action里可以定义一个<strong>_befor_操作名_</strong>的方法，它在执行该操作之前执行</p>
</li>
<li><p>后置操作</p>
<p>在当前Action里可以定义一个<strong>_after_操作名_</strong>的方法，它在执行该操作之后执行</p>
</li>
</ul>
<h2 id="URL"><a href="#URL" class="headerlink" title="URL"></a>URL</h2><ul>
<li><p>URL规则<br>默认是区分大小写的，在Index/index很明显就可以看出来了。既然是默认区分大小写，那么就有更改这个默认的方式。<br>在配置文件里</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'URL_CASE_INSENSITIVE'</span>=&gt;<span class="keyword">true</span>,<span class="comment">//url不区分大小写</span></span><br></pre></td></tr></table></figure>

<p>当我们创建一个模块，例如<strong>UserAction.class.php</strong>这是正确。但是，<strong>UserGourpAction.class.php</strong>，在访问<a href="http://localhost/thinkphp4/index.php/usergroup/index" target="_blank" rel="noopener">http://localhost/thinkphp4/index.php/usergroup/index</a> 的时候会报错。<strong>注意这个前提是开启了不区分大小写</strong>.这时的访问方式就需要改成<a href="http://localhost/thinkphp4/index.php/user_group/index" target="_blank" rel="noopener">http://localhost/thinkphp4/index.php/user_group/index</a><br>当没开启不区分大小写的时候还是按正常的方式访问即可。<a href="http://localhost/thinkphp4/index.php/UserGroup/index" target="_blank" rel="noopener">http://localhost/thinkphp4/index.php/UserGroup/index</a></p>
</li>
<li><p>URL伪静态<br>对于伪静态其实并不太了解。大概就是动态页面以静态页面呈现出来，优化SEO??balabala。。。不太懂。<br>在config里可以限制伪静态的后缀</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'URL_HTML_SUFFIX'</span>=&gt;<span class="string">'html|shtml|xml'</span>,<span class="comment">//限制伪静态的后缀</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>URL路由</p>
<ul>
<li><p>ThinkPHP支持URL路由功能，要启用路由功能，需要设置URL_ROUTER_ON<br>参数为true。开启路由功能后，并且配置URL_ROUTE_RULES参数后，系统会自动进行路由检测，如果在路由定义里面找到和当前URL匹配的路由名称，就会进行路由解析和重定向。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'URL_ROUTER_ON'</span>   =&gt; <span class="keyword">true</span>,</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用路由</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>规则表达式配置路由</span><br><span class="line">			<span class="string">'my'</span>=&gt;<span class="string">'Index/index'</span>,<span class="comment">//静态地址路由 localhost/tp3/index.php/my</span></span><br><span class="line">			<span class="string">':id/:num'</span>=&gt;<span class="string">'Index/index'</span>,<span class="comment">//动态地址路由 localhost/tp3/index.php/a/zhhhy</span></span><br><span class="line">			<span class="string">'year/:year/:month/:date'</span>=&gt;<span class="string">'Index/index'</span>,<span class="comment">//动态和静态混合地址路由localhost/tp3/index.php/year/2019/2/19</span></span><br><span class="line">			<span class="string">'year/:year\d/:month\d/:date\d'</span>=&gt;<span class="string">'Index/index'</span>,<span class="comment">//动态和静态混合地址路由 加上 \d代表类型只能是数字</span></span><br><span class="line">			<span class="string">'my/:id$'</span>=&gt;<span class="string">'Index/index'</span>,<span class="comment">// 加上$说明地址中只能是 my/1000 后面不能有其他内容了</span></span><br><span class="line"><span class="number">2.</span>正则表达式配置路由</span><br><span class="line">			<span class="comment">//正则路由规则必须以“/”开始和结束</span></span><br><span class="line">			<span class="comment">//格式2的参数可以传入数组或者字符串</span></span><br><span class="line">			<span class="comment">//参数值和外部地址中可以用动态变量 采用 :1、 :2 的方式 </span></span><br><span class="line">			下面是正则路由的定义示例：</span><br><span class="line">			<span class="string">'URL_ROUTER_ON'</span>   =&gt; <span class="keyword">true</span>, <span class="comment">//开启路由</span></span><br><span class="line">			<span class="string">'URL_ROUTE_RULES'</span> =&gt; <span class="keyword">array</span>( <span class="comment">//定义路由规则</span></span><br><span class="line">		    <span class="string">'/^blog\/(\d+)$/'</span>        =&gt; <span class="string">'Blog/read?id=:1'</span>,</span><br><span class="line">   			 <span class="string">'/^blog\/(\d+)\/(\d+)$/'</span> =&gt; <span class="string">'Blog/achive?year=:1&amp;month=:2'</span>,</span><br><span class="line">   			 <span class="string">'/^blog\/(\d+)_(\d+)$/'</span>  =&gt; <span class="string">'blog.php?id=:1&amp;page=:2'</span>,</span><br><span class="line">			),</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h2 id="使用AJAX"><a href="#使用AJAX" class="headerlink" title="使用AJAX"></a>使用AJAX</h2><p>关于这部分，想找个实例来试试应该比较能接受吧。 好像需要点js代码的知识。有些触及到自己的知识盲区</p>
<h2 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h2><p>到这基本上对thinkphp3总的知识框架有了一定的学习。这基本上是核心包的内容，之后再解除扩展包比如验证码模块呀，上传模块啊之类的学习。</p>

        </section>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>zhhhy</span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="http://yoursite.com/2019/03/12/thinkphp31/">http://yoursite.com/2019/03/12/thinkphp31/</a></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>License:</span>
                        <span>Copyright (c) 2019 <a href="http://creativecommons.org/licenses/by-nc/4.0/">CC-BY-NC-4.0</a> LICENSE</span>
                    </p>
                
                
                     <p class="copyright-item">
                         <span>Solgan:</span>
                         <span>Do you believe in <strong>DESTINY<strong>?</strong></strong></span>
                     </p>
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/thinkphp/"># thinkphp</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2019/03/12/thinkphp32/">ThinkPHP3.2学习</a>
            
            
            <a class="next" rel="next" href="/2019/03/12/myhack-sql/">mysql渗透相关系列知识点</a>
            
        </section>


    </article>
</div>
        </div>
        <footer id="footer" class="footer">
    <div class="copyright">
        <span>© zhhhy | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Sirice19/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>
    </div>
</body>
</html>